# RPN Calculator

Консольный калькулятор для вычисления выражений в обратной польской нотации (RPN).

## Описание

Обратная польская нотация — это способ записи математических выражений, где операторы располагаются после операндов. Это исключает необходимость в скобках для задания порядка операций.

**Примеры:**
- Инфиксная запись: `(2 + 3) * 4` → RPN: `2 3 + 4 *`
- Инфиксная запись: `2 + 3 * 4` → RPN: `2 3 4 * +`

## Возможности

- Бинарные операции: `+`, `-`, `*`, `/`, `**`, `//`, `%`
- Унарные операции: `~` (унарный минус), `$` (унарный плюс)  
- Поддержка скобок с валидацией содержимого
- Работа с целыми и дробными числами
- Валидация выражений с информативными сообщениями об ошибках
- Интерактивный режим с командами управления

## Структура проекта

```
rpn-calculator/
├── src/
│ ├── calculator.py # Основной класс калькулятора
│ └── main.py # Консольный интерфейс
├── tests/
│ └── test_calculator.py # Тесты pytest
├── requirements.txt # Зависимости проекта
├── .gitignore # Исключения для Git
└── README.md # Документация
```

## Установка и запуск

### Требования
- Python 3.10+
- pytest (для тестирования)

### Команды

Клонирование репозитория:
```bash
git clone <repository-url>
cd rpn-calculator
```

Установка зависимостей:
```
pip install -r requirements.txt
```

Запуск калькулятора:
```
python src/main.py
```

Запуск тестов:
```
pytest test.py -v
```

## Примеры использования

```
RPN> 3 4 +
7

RPN> 2 3 + 4 *
20

RPN> 5 ~
-5

RPN> (2 3 +) 4 *
20

RPN> help
[показывает справку]

RPN> exit
```

## Команды интерфейса

- `help` — показать справку с примерами
- `exit` — выйти из программы

## Архитектура

Класс `Calculator` содержит следующие методы:
- `__init__` — инициализация с предобработкой выражения
- `eval` — публичный интерфейс для вычисления
- `_parse` — основная логика RPN с использованием стека
- `_preprocess` — токенизация и валидация ввода
- `_calc`, `_calc_unary` — арифметические операции

## Особенности реализации

**Обработка скобок:** Калькулятор валидирует содержимое скобок. Каждая пара скобок должна содержать корректное RPN выражение.

**Унарные операторы:** Используются символы `~` и `$` для избежания неоднозначности с бинарными операторами.

**Валидация типов:** Операции `//` и `%` работают только с целыми числами или float числами вида `5.0`.

## Тестирование

Запуск всех тестов `pytest test.py -v`

## Ограничения

- Использует только стандартную библиотеку Python
- Операторы `//` и `%` работают только с целыми числами по значению
- Все токены должны быть разделены пробелами (кроме скобок)

## Лицензия

Проект создан в рамках лабораторной работы и предназначен для изучения алгоритмов парсинга выражений и работы со стеком. Распространяется в образовательных целях.
